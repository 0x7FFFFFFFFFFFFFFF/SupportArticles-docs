---
title: SQL Server troubleshooting and diagnostic tools for on-prem and hybrid scenarios
description: This article describes which tools Microsoft technical support uses for troubleshooting SQL Server Hybrid issues
ms.author: JoPilov
ms.reviewer: pijocoder
ms.date: 05/30/2023
ms.prod: sql
ms.custom: sap:Other tools
---
# SQL Server troubleshooting and diagnostic tools for on-prem and hybrid scenarios

_Applies to:_ SQL Server

## Introduction

## Supported platforms

| Common Scenario | Basic logs to collect | Tool to gather logs | Tool to analyze logs |
| --- | --- | --- | --- |
| Availability Group | • Cluster logs<br />Event logs<br />• System Monitor (Performance monitor logs)<br />• SQL Server error logs<br />• SQLDIAG XEL files<br />• AlwaysOn Health session XEL files<br />• System Health session XEL files<br />• Extended Events for AG data movement<br />• DMV and Catalog view snapshots for AG |<br />Preferred: **[SQL LogScout](https://github.com/microsoft/SQL_LogScout/releases)**<br />Use data collection [scenario](https://github.com/microsoft/sql_logscout#scenarios) named "AlwaysOn"<br/><br/>Alternative: **[TSSv2](../../windows-client/windows-troubleshooters/introduction-to-troubleshootingscript-toolset-tssv2.md)**<br />Use scenario "SQL Base"<br/><br/>Alternative: **[PSSDIAG](https://github.com/microsoft/DiagManager/wiki/Create-a-PSSDiag-Package)**<br />Use custom diagnostic "Always On Basic Info"<br /> | Preferred: **[AGDiag](https://github.com/microsoft/agdiag/wiki/Getting-Started)**<br />Scenarios to use -> Analyze failover, failures<br /><br />Alternative: **[SQL Nexus](https://github.com/microsoft/SqlNexus/wiki/How-to-use-SQL-Nexus)**<br />Scenarios to use -> Performance, Latency, Health, Best practices<br /> |
| Slow Performance |<br />• Extended Event (XEvent) trace captures batch-level starting/completed events, errors and warnings, log growth/shrink, lock escalation and timeout, deadlock, login/logout<br />• List of actively-running SQL traces and Xevents<br />• Snapshots of SQL DMVs that track waits/blocking and high CPU queries<br />• Query Data Store info (if that is active)<br />• `tempdb` contention info from SQL DMVs/system views<br />• Linked Server metadata (SQL DMVs/system views)<br />• Service Broker configuration information (SQL DMVs/system views) | Preferred: **SQL LogScout**<br />Use data collection scenario named "GeneralPerf" or "DetailedPerf" or "LightPerf"<br />https://github.com/microsoft/sql_logscout#scenarios<br /><br />Alternative: **PSSDIAG**<br />Use scenario "General Performance" or "Detailed Performance" or "Light Performance"<br />https://github.com/microsoft/DiagManager/wiki/Create-a-PSSDiag-Package | Preferred: **SQL Nexus**<br />Scenarios to use -> Performance analysis, Best Practice recommendations, Bottleneck Analysis, Blocking, Top Queries<br />https://github.com/microsoft/SqlNexus/wiki/How-to-use-SQL-Nexus<br /><br />Alternative: **RML Utilities**<br />Scenarios to use -> Query Analysis to understand Top resource consuming queries<br />https://learn.microsoft.com/troubleshoot/sql/tools/replay-markup-language-utility |
| Connection | • BID Trace/Driver Traces<br />• Network Trace<br />• Auth Trace<br />• SQL Server Error logs<br />• Windows Event logs<br />Snapshots of NETSTAT and TASKLIST | Preferred: **SQL Trace**<br />Configure collection settings in the INI file<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SQLTRACE<br /><br />Alternative: **SQL LogScout**<br />Use scenario "NetworkTrace"<br />https://github.com/microsoft/sql_logscout#scenarios<br /><br />Alternative: **SSPICLIENT**<br />Scenario -> use when encountering SSPI or Kerberos errors and will log a detailed trace for analysis<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SSPICLIENT | Preferred: **SQL Network Analyzer**<br />Scenarios to use -> read network packet capture files and produce a report highlighting potential areas of interest.<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SQLNAUI<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SQLNA<br /><br />Alternative: **SQLCHECK**<br />reports on any settings that may affect connectivity<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SQLCHECK<br /><br />Alternative: **SQLBENCH**<br />display timings for comparative analysis<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/SQLBENCH<br /><br />Alternative: **DBTEST**<br />record how long it takes to connect and how long to execute a command<br />https://github.com/microsoft/CSS_SQL_Networking_Tools/wiki/DBTEST |
| Replication | • SQL Server error logs<br />• Replication, CDC, CT diagnostic info (SQL DMVs/system views) | Preferred: **SQL LogScout**<br />Use data collection scenario named<br />"Replication"<br />https://github.com/microsoft/sql_logscout#scenarios<br /><br />Alternative: **PSSDIAG**<br />Use custom diagnostic "Replication"<br />https://github.com/microsoft/DiagManager/wiki/Create-a-PSSDiag-Package | Preferred: **SQL Nexus**<br />Scenarios to use: Replication reports, Performance analysis, Best Practice recommendations, Bottleneck Analysis, Blocking, Top Queries<br />https://github.com/microsoft/SqlNexus/wiki/How-to-use-SQL-Nexus |
| Installation/Setup | • Setup Bootstrap folder with all the setup logs | Preferred: **SQL LogScout**<br />Use data collection scenario named "Setup"<br />https://github.com/microsoft/sql_logscout#scenarios | |
| Backup/Restore | • Backup/Restore progress Xevent (backup_restore_progress_trace)<br />• Trace flags for backup restore progress<br />• SQL VSS Writer Log (on SQL Server 2019 and later)<br />• VSS Admin (OS) logs for VSS backup-related scenarios<br />• Performance Monitor | Preferred: **SQL LogScout**<br />Use data collection scenario named "BackupRestore"<br />https://github.com/microsoft/sql_logscout#scenarios | |
| Memory Usage Troubleshooting | • Memory clerks DMVs or DBCC MEMORYSTATUS<br />• Performance Monitor | Preferred: **SQL LogScout**<br />Use data collection scenario named "Memory"<br />https://github.com/microsoft/sql_logscout#scenarios | Preferred: **SQL Nexus** to import memory output and view at Memory Brokers |
| Memory Dumps | • Manual memory dumps captured for specific t-shooting scenarios<br />• Automatically generated memory dumps for exception scenarios | Preferred: **SQL LogScout**<br />Use data collection scenario named "DumpMemory"<br />https://github.com/microsoft/sql_logscout#scenarios<br /><br />Alternative: **SQLDumper**<br />https://learn.microsoft.com/en-us/troubleshoot/sql/tools/use-sqldumper-generate-dump-file<br /><br />Alternative: **TSS V2**<br />Use scenario "SQL Base" to gather existing memory dumps<br />https://learn.microsoft.com/en-us/troubleshoot/windows-client/windows-troubleshooters/introduction-to-troubleshootingscript-toolset-tssv2 | |
