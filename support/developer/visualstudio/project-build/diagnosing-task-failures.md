---
title: Diagnosing task failures
description: Learn how to diagnose MSBuild task failures by identifying the failing task, tool name, and other information.
ms.date: 03/13/2023
ms.topic: troubleshooting
f1_keywords:
- MSBuild.ToolTask.ToolCommandFailed
author: padmajayaraman
ms.author: v-jayaramanp
ms.reviewer: ghogen
---
# Diagnose MSBuild task failures

 _Applies to:_&nbsp;Visual Studio

The `MSB6006` error occurs when a <xref:Microsoft.Build.Utilities.ToolTask> derived class runs a tool process that returns a non-zero exit code if the task hasn't logged a more specific error.

## Identify the failing task

When you see a task error, the first step is to identify the task that is failing.

The error message specifies the tool name (either a friendly name provided by the task's implementation of <xref:Microsoft.Build.Utilities.ToolTask.ToolName> or the name of the executable) and the numeric exit code. For example, in the error message `error MSB6006: "custom tool" exited with code 1.`, the tool name is `custom tool` and the exit code is `1`.

To find the failed MSBuild task:

+ **In the command-line builds**: If the build was configured to include a summary (the default), the summary will look like this:

  ```output
  Build FAILED.

  "S:\MSB6006_demo\MSB6006_demo.csproj" (default target) (1) ->
  (InvokeToolTask target) ->
    S:\MSB6006_demo\MSB6006_demo.csproj(19,5): error MSB6006: "custom tool" exited with code 1.
  ```

  This result indicates that the error occurred in a task defined on line 19 of the file `S:\MSB6006_demo\MSB6006_demo.csproj`, in a target named `InvokeToolTask`, and in the project `S:\MSB6006_demo\MSB6006_demo.csproj`.

+ **In the Visual Studio UI**: The same information is available in the Visual Studio error list in the columns `Project`, `File`, and `Line`.

## Find more failure information

This error occurs when the task didn't log a specific error. The failure to log an error  often occurs if the task isn't configured to understand the error format generated by the tool it calls.

By default, well-scripted tools generate some contextual or error information in their standard output or error stream, and tasks capture and log this information. For additional information, look in the log entries before the error occurred. You might have to re-run the build with a higher log level to preserve this information. The additional context or errors identified in logging reveal the root cause of the problem. If not, you may have to narrow down the potential causes by examining the properties and items that are inputs to the failing task.

> [!NOTE]
> [MSBuild](/visualstudio/msbuild/msbuild) recognizes a specific diagnostic output format. The details of this format are documented in MSBuild and [Visual Studio format for diagnostic messages](/visualstudio/msbuild/msbuild-diagnostic-format-for-tasks).
