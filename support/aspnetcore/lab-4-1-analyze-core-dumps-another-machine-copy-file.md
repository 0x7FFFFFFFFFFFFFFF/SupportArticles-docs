---
title: Copy core dumps to another machine
description: This article describes how to copy core dumps from Linux machine to another Windows machine.
ms.date: 06/11/2021
ms.prod: aspnet-core
ms.reviewer: ramakoni, ahmet.bostanci
---
# Lab 4.1 Analyzing core dumps in another machine - Copying files to your Windows machine

_Applies to:_ &nbsp; .NET Core 2.1, .NET Core 3.1  

This article introduces how to copy core dumps from to another Windows machine. For example, you collect core dumps from Linux, then copy them to Windows machine to analyze.

## Prerequisites

The minimum requirement to follow this section is to have at least one core dump captured in your Linux environment from the previous sections of this training. Any core dump generated by either the createdump or dotnet-dump tools can be used.

## Goal of this lab

So far throughout the training modules, you collected core dumps in Linux and opened them in debuggers on the same Linux machine. What happens if you cannot analyze the dumps in the same machine? You usually collect core dumps from your production environment with the intent to troubleshoot an issue, but it not recommended nor is it always possible to run the debugging session on the same production machine.

To address this, the lab series which follows will cover the options to analyze the core dump collected in a Linux machine.

- Analyzing the core dump in a Linux machine running inside Windows Subsystem For Linux (WSL) environment with dotnet-dump.
- Analyzing the core dump in a Linux machine running inside a docker container with dotnet-dump.

The below exercises are based on a Windows 10 machine that was used to host a docker container and WSL2 environments.

In this lab's first part, you will be guided through the procedure of how copy core dump files from Linux machine to Windows machine using pscp command. The lab will also address a "don't do it this way" of copying files.

> [!NOTE]
> If you do not want to deal with copying files from the Linux machine on which the core dumps were generated to the target Windows machine, or, you did not follow the previous parts and do not have a core dump, then you can consider making usage of the sample core dump files uploaded to the BuggyAmb GitHub page and skip this part.

## Copying a core dump from Linux machine to your local machine

During the exercises aimed at debugging the failing ASP.net Core application showcased in this training, three manual memory dumps were generated. We will examine how to copy those three core dump files to a Windows machine:

:::image type="content" source="./media/lab-4-1-analyze-core-dumps-another-machine-copy-file/ll.png" alt-text="BuggyAmb ll" border="true":::

Remember that a core dump contains the process memory so the size of a core dump could be quite large when the process memory usage is high. To optimize the transfer, instead of copying each core dump one by one, you can package and compress them using tar command so you will have one compressed *coredumps.tar.gz* file which contains all three core dump files.

As seen in the screenshot below you can use the `tar -czvf coredumps.tar.gz coredump.manual.*` command to create the compressed archive file:

:::image type="content" source="./media/lab-4-1-analyze-core-dumps-another-machine-copy-file/tar.png" alt-text="BuggyAmb tar" border="true":::

In the example above the archive file *coredumps.tar.gz* is in dumps folder in the *:::no-loc text="home":::* directory for my user on the Linux machine. The objective is  to copy the *:::no-loc text="/home/UserName/coredumps.tar.gz":::* to *:::no-loc text="d:\Learn\Linux\Dumps folder":::* in on the target Windows machine.

There are several ways to copy files from a Linux machine and you should already be familiar with one of the options: using the `pscp` command in Windows machine. If you have followed along the entire series, you should remember this command from [Part 2.5 - Copying files from your development environment to a Linux VM, and then extracting the files in Linux](2-5-copy-file-linux-vm-extract-file.md).

> [!NOTE]
> Note to the readers that have not follow through the above Part 2.5: it comes with [PuTTY](https://www.putty.org/) and you can learn the basic usage options in Part 2.5.

Open the Windows Terminal on your Windows machine (you can open command prompt if you do not wish to use [Windows Terminal](https://www.microsoft.com/p/windows-terminal/9n0dx20hk701?activetab=pivot:overviewtab) - however I strongly recommend you to use the Windows Terminal) and run the following command to copy the file to the machine:

```bash
pscp -i D:\Learn\Linux\BuggyAmb-Ubuntu-Training_key.ppk <UserName>@buggyamb:/home/<UserName>/dumps/coredumps.tar.gz D:\Learn\Linux\Dumps\coredumps.tar.gz
```

> [!NOTE]
> pscp, just like PuTTY, uses PPK file format for the private key. If you have only the PEM file and do not have the PPK one, you can convert the PEM format to PPK format using PuTTY Key Generator tool (PuTTYgen). This is explained in detail in the [Part 1.1 - Creating a Linux virtual machine in Azure and connecting to it](1-1-creating-vm.md).

As seen in the screenshot below, the command successfully copied the *coredumps.tar.gz* file to my local machine in *:::no-loc text="D:\Learn\Linux\Dumps":::* folder:

:::image type="content" source="./media/lab-4-1-analyze-core-dumps-another-machine-copy-file/ahnetnb.png" alt-text="BuggyAmb ahnetnb" border="true":::

## What are my other options to copy files from Linux?

As I mentioned above, there are several ways to copy files from Linux to Windows machine. One of the obvious options is to install an FTP server on Linux and use FTP transfer to the target Windows machine. If you were to choose this option, please keep in mind to set up an FTP over SSH solution for security reasons and avoid using plain FTP protocol which sends the username, password, and data in clear text.

One another "obvious" choice would be to copy the core dump files to the *wwwroot* folder of your ASP.NET Core application and download them using a browser. **This is a really bad idea… Please do not attempt this…** A core dump contains all the memory of your process which means that any sensitive information would be there in the core dump file. Copying such files to a web server means that you will be exposing the sensitive information enclosed inside to anyone who can access your webserver, even you do not tell them the URL. Please consider this a solution of last resort because of the exposure of information it entails.

Following a successful transfer, you should have at least one core dump in our Windows machine. You can now move on to the next part to understand how to analyze the dumps.

## Next steps

[Lab 4.2 Analyzing core dumps in another machine - Using WSL to open core dumps](lab-4-2-analyze-core-dumps-another-machine-wsl.md)
